{% extends 'base.html' %}
{% block content %}
<div class="max-w-7xl mx-auto px-3">
  <h2 class="text-2xl font-semibold mb-4">Services</h2>
  <div id="servicesGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
</div>
{% endblock %}
{% block scripts %}
<script>
(async function(){
  const r = await fetch('/services');
  const list = await r.json();
  const grid = document.getElementById('servicesGrid');
  if (!Array.isArray(list) || list.length === 0){
    grid.innerHTML = '<div class="text-gray-500">No services yet.</div>';
    return;
  }
  list.forEach(s => {
    const img = s.image_url || 'https://images.unsplash.com/photo-1582719478250-c89cae4dc85b?q=80&w=1200&auto=format&fit=crop';
    const card = document.createElement('div');
    card.className = 'bg-white rounded-xl shadow hover:shadow-lg transition overflow-hidden flex flex-col';
    card.innerHTML = `
      <img src="${img}" alt="${s.name}" class="h-44 w-full object-cover">
      <div class="p-4 flex-1 flex flex-col">
        <div class="flex items-start justify-between gap-3">
          <div>
            <h3 class="text-lg font-semibold">${s.name}</h3>
            <div class="text-sm text-gray-500">${s.category || ''}</div>
          </div>
          <div class="text-right">
            <div class="text-sm text-gray-500">From</div>
            <div class="text-xl font-bold">$${Number(s.base_price).toFixed(2)}</div>
          </div>
        </div>
        <div class="mt-4 flex gap-2 mt-auto">
          <a class="px-3 py-2 rounded border border-gray-300 text-gray-700 text-sm hover:bg-gray-50" href="/services/${s.id}">View</a>
          <a class="px-3 py-2 rounded bg-blue-600 text-white text-sm hover:bg-blue-700" href="/booking?service_id=${s.id}">Book Now</a>
        </div>
      </div>`;
    grid.appendChild(card);
  });
})();
</script>
{% endblock %}

