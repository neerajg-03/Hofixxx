{% extends 'base.html' %}
{% block content %}
<div class="container-fluid px-0">
  <!-- Enhanced Hero Section -->
  <section class="hero-section position-relative overflow-hidden">
    <div class="hero-background"></div>
    <div class="hero-overlay"></div>
    <div class="container position-relative">
      <div class="row align-items-center min-vh-75">
        <div class="col-lg-6 text-white" data-aos="fade-right">
          <div class="hero-content">
            <h1 class="display-4 fw-bold mb-4">Professional Home Services at Your Doorstep</h1>
            <p class="lead mb-4">Connect with verified, skilled professionals for all your home maintenance needs. Book in minutes, get service in hours.</p>
            <div class="hero-stats mb-4">
              <div class="row text-center">
                <div class="col-4">
                  <div class="stat-item">
                    <div class="h3 mb-0 fw-bold">10K+</div>
                    <small>Happy Customers</small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="stat-item">
                    <div class="h3 mb-0 fw-bold">500+</div>
                    <small>Verified Pros</small>
                  </div>
                </div>
                <div class="col-4">
                  <div class="stat-item">
                    <div class="h3 mb-0 fw-bold">24/7</div>
                    <small>Available</small>
                  </div>
                </div>
              </div>
            </div>
            <div class="d-flex flex-wrap gap-3">
              <a href="#quick-booking" class="btn btn-light btn-lg px-4 py-3 rounded-pill shadow-lg hover-lift">
                <i class="fas fa-calendar-plus me-2"></i>Book Service Now
              </a>
              <a href="/signup?role=provider" class="btn btn-outline-light btn-lg px-4 py-3 rounded-pill border-2 hover-lift">
                <i class="fas fa-user-tie me-2"></i>Become a Provider
              </a>
            </div>
          </div>
        </div>
        <div class="col-lg-6" data-aos="fade-left">
          <div class="hero-visual">
            <div class="service-icons-grid">
              <div class="service-icon electrician">
                <i class="fas fa-bolt"></i>
                <span>Electrician</span>
              </div>
              <div class="service-icon plumber">
                <i class="fas fa-wrench"></i>
                <span>Plumber</span>
              </div>
              <div class="service-icon carpenter">
                <i class="fas fa-hammer"></i>
                <span>Carpenter</span>
              </div>
              <div class="service-icon cleaner">
                <i class="fas fa-broom"></i>
                <span>Cleaner</span>
              </div>
              <div class="service-icon painter">
                <i class="fas fa-paint-brush"></i>
                <span>Painter</span>
              </div>
              <div class="service-icon ac">
                <i class="fas fa-snowflake"></i>
                <span>AC Repair</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Quick Booking Section -->
  <section id="quick-booking" class="py-5 bg-white">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="quick-booking-card shadow-lg rounded-4 p-4" data-aos="fade-up">
            <div class="text-center mb-4">
              <h3 class="fw-bold text-primary">Quick Service Booking</h3>
              <p class="text-muted">Get started in seconds</p>
            </div>
            <form id="quickBookingForm" class="row g-3">
              <div class="col-md-4">
                <label class="form-label fw-semibold">Service Type</label>
                <select class="form-select" id="serviceType" required>
                  <option value="">Select a service</option>
                  <option value="electrician">üîå Electrician</option>
                  <option value="plumber">üöø Plumber</option>
                  <option value="carpenter">ü™µ Carpenter</option>
                  <option value="cleaner">üßπ Cleaner</option>
                  <option value="painter">üé® Painter</option>
                  <option value="ac">‚ùÑÔ∏è AC Repair</option>
                </select>
              </div>
              <div class="col-md-4">
                <label class="form-label fw-semibold">When do you need it?</label>
                <select class="form-select" id="urgency" required>
                  <option value="">Select urgency</option>
                  <option value="emergency">üö® Emergency (ASAP)</option>
                  <option value="today">üìÖ Today</option>
                  <option value="tomorrow">üìÖ Tomorrow</option>
                  <option value="this-week">üìÖ This Week</option>
                </select>
              </div>
              <div class="col-md-4">
                <label class="form-label fw-semibold">Location</label>
                <input type="text" class="form-control" id="location" placeholder="Enter your location" required>
              </div>
              <div class="col-12">
                <button type="submit" class="btn btn-primary btn-lg w-100 rounded-pill">
                  <i class="fas fa-search me-2"></i>Find Available Providers
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Services Section -->
  <section class="py-5 bg-light">
    <div class="container">
      <div class="row mb-5">
        <div class="col-lg-8 mx-auto text-center">
          <h2 class="display-6 fw-bold text-primary mb-3" data-aos="fade-up">Our Most Popular Services</h2>
          <p class="lead text-muted" data-aos="fade-up" data-aos-delay="100">Professional home services delivered by verified experts</p>
        </div>
      </div>
      <div id="homeServicesGrid" class="row g-4"></div>
      <div class="text-center mt-5">
        <a href="/services" class="btn btn-outline-primary btn-lg rounded-pill px-4">
          <i class="fas fa-arrow-right me-2"></i>View All Services
        </a>
      </div>
    </div>
  </section>

  <!-- How it Works Section -->
  <section class="py-5 bg-white">
    <div class="container">
      <div class="row mb-5">
        <div class="col-lg-8 mx-auto text-center">
          <h2 class="display-6 fw-bold text-dark mb-3" data-aos="fade-up">How It Works</h2>
          <p class="lead text-muted" data-aos="fade-up" data-aos-delay="100">Getting professional help has never been easier</p>
        </div>
      </div>
      <div class="row g-4">
        <div class="col-lg-4" data-aos="fade-up" data-aos-delay="50">
          <div class="how-it-works-card h-100 text-center p-4 rounded-4 shadow-sm border-0">
            <div class="step-icon mx-auto mb-4">
              <i class="fas fa-search text-primary"></i>
            </div>
            <h4 class="fw-bold mb-3">1. Choose Your Service</h4>
            <p class="text-muted">Browse our wide range of professional home services and select what you need.</p>
          </div>
        </div>
        <div class="col-lg-4" data-aos="fade-up" data-aos-delay="150">
          <div class="how-it-works-card h-100 text-center p-4 rounded-4 shadow-sm border-0">
            <div class="step-icon mx-auto mb-4">
              <i class="fas fa-user-check text-success"></i>
            </div>
            <h4 class="fw-bold mb-3">2. Get Matched</h4>
            <p class="text-muted">We'll connect you with verified, skilled professionals in your area.</p>
          </div>
        </div>
        <div class="col-lg-4" data-aos="fade-up" data-aos-delay="250">
          <div class="how-it-works-card h-100 text-center p-4 rounded-4 shadow-sm border-0">
            <div class="step-icon mx-auto mb-4">
              <i class="fas fa-clock text-warning"></i>
            </div>
            <h4 class="fw-bold mb-3">3. Get Service</h4>
            <p class="text-muted">Track your booking in real-time and get professional service delivered.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Testimonials Section -->
  <section class="py-5 bg-light">
    <div class="container">
      <div class="row mb-5">
        <div class="col-lg-8 mx-auto text-center">
          <h2 class="display-6 fw-bold text-dark mb-3" data-aos="fade-up">What Our Customers Say</h2>
          <p class="lead text-muted" data-aos="fade-up" data-aos-delay="100">Real reviews from satisfied customers</p>
        </div>
      </div>
      <div class="row g-4">
        <div class="col-lg-4" data-aos="fade-up" data-aos-delay="50">
          <div class="testimonial-card h-100 p-4 rounded-4 shadow-sm bg-white border-0">
            <div class="stars mb-3">
              <i class="fas fa-star text-warning"></i>
              <i class="fas fa-star text-warning"></i>
              <i class="fas fa-star text-warning"></i>
              <i class="fas fa-star text-warning"></i>
              <i class="fas fa-star text-warning"></i>
            </div>
            <p class="text-muted mb-3">"Amazing service! The electrician was professional, arrived on time, and fixed my issue quickly. Highly recommend!"</p>
            <div class="d-flex align-items-center">
              <div class="avatar me-3">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Rohit&backgroundColor=b6e3f4" alt="Rohit" class="rounded-circle" width="40">
              </div>
              <div>
                <div class="fw-semibold">Rohit Sharma</div>
                <small class="text-muted">Delhi</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4" data-aos="fade-up" data-aos-delay="150">
          <div class="testimonial-card h-100 p-4 rounded-4 shadow-sm bg-white border-0">
            <div class="stars mb-3">
              <i class="fas fa-star text-warning"></i>
              <i class="fas fa-star text-warning"></i>
              <i class="fas fa-star text-warning"></i>
              <i class="fas fa-star text-warning"></i>
              <i class="fas fa-star text-warning"></i>
            </div>
            <p class="text-muted mb-3">"The plumber was excellent! Clean work, fair pricing, and very knowledgeable. Will definitely use Hofix again."</p>
            <div class="d-flex align-items-center">
              <div class="avatar me-3">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Priya&backgroundColor=c7a2ff" alt="Priya" class="rounded-circle" width="40">
              </div>
              <div>
                <div class="fw-semibold">Priya Patel</div>
                <small class="text-muted">Mumbai</small>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-4" data-aos="fade-up" data-aos-delay="250">
          <div class="testimonial-card h-100 p-4 rounded-4 shadow-sm bg-white border-0">
            <div class="stars mb-3">
              <i class="fas fa-star text-warning"></i>
              <i class="fas fa-star text-warning"></i>
              <i class="fas fa-star text-warning"></i>
              <i class="fas fa-star text-warning"></i>
              <i class="fas fa-star text-warning"></i>
            </div>
            <p class="text-muted mb-3">"Super convenient! Booked a cleaning service and the team was thorough and professional. Great value for money!"</p>
            <div class="d-flex align-items-center">
              <div class="avatar me-3">
                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Amit&backgroundColor=ffd93d" alt="Amit" class="rounded-circle" width="40">
              </div>
              <div>
                <div class="fw-semibold">Amit Kumar</div>
                <small class="text-muted">Bangalore</small>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Trust & Stats Section -->
  <section class="py-5 bg-white">
    <div class="container">
      <div class="row g-4">
        <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="50">
          <div class="trust-item text-center p-4">
            <div class="trust-icon mx-auto mb-3">
              <i class="fas fa-shield-alt text-success"></i>
            </div>
            <h4 class="fw-bold mb-2">Verified Providers</h4>
            <p class="text-muted small">All professionals are background checked and verified</p>
          </div>
        </div>
        <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="100">
          <div class="trust-item text-center p-4">
            <div class="trust-icon mx-auto mb-3">
              <i class="fas fa-headset text-primary"></i>
            </div>
            <h4 class="fw-bold mb-2">24/7 Support</h4>
            <p class="text-muted small">Round-the-clock customer support whenever you need help</p>
          </div>
        </div>
        <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="150">
          <div class="trust-item text-center p-4">
            <div class="trust-icon mx-auto mb-3">
              <i class="fas fa-users text-warning"></i>
            </div>
            <h4 class="fw-bold mb-2">10,000+ Users</h4>
            <p class="text-muted small">Trusted by thousands of satisfied customers nationwide</p>
          </div>
        </div>
        <div class="col-lg-3 col-md-6" data-aos="fade-up" data-aos-delay="200">
          <div class="trust-item text-center p-4">
            <div class="trust-icon mx-auto mb-3">
              <i class="fas fa-clock text-info"></i>
            </div>
            <h4 class="fw-bold mb-2">Quick Response</h4>
            <p class="text-muted small">Average response time of under 15 minutes</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Final CTA Section -->
  <section class="py-5 bg-primary text-white">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-8" data-aos="fade-right">
          <h3 class="display-6 fw-bold mb-3">Ready to Get Started?</h3>
          <p class="lead mb-0">Join thousands of satisfied customers who trust Hofix for their home service needs.</p>
        </div>
        <div class="col-lg-4 text-lg-end" data-aos="fade-left">
          <a href="/booking" class="btn btn-light btn-lg px-4 py-3 rounded-pill shadow-lg hover-lift">
            <i class="fas fa-calendar-plus me-2"></i>Book Service Now
          </a>
        </div>
      </div>
    </div>
  </section>
</div>
{% endblock %}
{% block scripts %}
<script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
<script>
AOS.init({ once: true, duration: 600 });

// Service icons mapping
const serviceIcons = {
  'Electrician': 'fas fa-bolt',
  'Plumber': 'fas fa-wrench',
  'Carpenter': 'fas fa-hammer',
  'Cleaner': 'fas fa-broom',
  'Painter': 'fas fa-paint-brush',
  'AC Repair': 'fas fa-snowflake'
};

// Load services to show in home grid
(async function(){
  try{
    const r = await fetch('/services');
    const list = await r.json();
    const grid = document.getElementById('homeServicesGrid');
    
    if (list && list.length > 0) {
      list.slice(0, 6).forEach((s, index) => {
        const icon = serviceIcons[s.name] || 'fas fa-tools';
        const card = document.createElement('div');
        card.className = 'col-lg-4 col-md-6';
        card.innerHTML = `
          <div class="service-card h-100 p-4 rounded-4 shadow-sm bg-white border-0 hover-lift" data-aos="fade-up" data-aos-delay="${index * 100}">
            <div class="service-icon-wrapper mb-3">
              <i class="${icon} text-primary"></i>
            </div>
            <h5 class="fw-bold mb-2">${s.name}</h5>
            <p class="text-muted small mb-3">${s.category || 'Professional Service'}</p>
            <div class="d-flex justify-content-between align-items-center mb-3">
              <span class="text-primary fw-bold">From ‚Çπ${Number(s.base_price).toFixed(0)}</span>
              <span class="badge bg-light text-dark">Popular</span>
            </div>
            <a href="/booking-map?service_id=${s.id}" class="btn btn-outline-primary w-100 rounded-pill">
              <i class="fas fa-calendar-plus me-2"></i>Book Now
            </a>
          </div>`;
        grid.appendChild(card);
      });
    }
  }catch(e){
    console.error('Error loading services:', e);
  }
})();

// Quick booking form handler
document.getElementById('quickBookingForm')?.addEventListener('submit', function(e) {
  e.preventDefault();
  
  const serviceType = document.getElementById('serviceType').value;
  const urgency = document.getElementById('urgency').value;
  const location = document.getElementById('location').value;
  
  if (!serviceType || !urgency || !location) {
    alert('Please fill in all fields');
    return;
  }
  
  // Redirect to map-based booking page
  const params = new URLSearchParams({
    service_type: serviceType,
    urgency: urgency,
    location: location
  });
  
  window.location.href = `/booking-map?${params.toString()}`;
});

// Smooth scrolling for anchor links
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      target.scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
    }
  });
});

// Add loading animation to buttons
document.querySelectorAll('.btn').forEach(btn => {
  btn.addEventListener('click', function() {
    if (this.href && this.href.includes('/booking')) {
      this.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Loading...';
    }
  });
});
</script>
{% endblock %}
